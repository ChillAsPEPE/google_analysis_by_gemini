<!DOCTYPE html>
<html lang="ko" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>구글 독과점 리스크 심층 분석 대시보드 (리스크 근거 명시)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Modern Slate (Background: #F1F5F9, Text: #1E293B, Primary Accent: #3B82F6, Highlight: #F59E0B) -->
    <!-- Application Structure Plan: A single-page dashboard with a logical flow. This final version adds a new, detailed "Basis for Regulatory Risk Estimation" section as requested, providing quantitative reasoning for the risk factors applied in the financial charts. This enhances transparency and credibility. -->
    <!-- Visualization & Content Choices: 
    - Risk Estimation Basis: A new text-based section with clear headings and lists breaks down the logic for Search, Network, and Subscriptions risk factors, using specific numbers and assumptions.
    - P/E Analysis: Maintains the 1/2/3-Year Forward P/E split.
    - Scenario Assumptions: The detailed 10-scenario grid remains.
    - Overall Assessment: The conclusion integrates all preceding quantitative analysis.
    - Libraries: Chart.js for all charts (Canvas). Vanilla JS for all interactions. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #F1F5F9; color: #1E293B; }
        .chart-container { position: relative; width: 100%; max-width: 900px; margin-left: auto; margin-right: auto; height: 450px; max-height: 60vh; }
        @media (min-width: 768px) { .chart-container { height: 500px; } }
        .timeline-item-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out, padding 0.5s ease-in-out;
            padding-top: 0;
            padding-bottom: 0;
        }
        .timeline-item-content.active {
            max-height: 500px;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/90 backdrop-blur-lg sticky top-0 z-40 shadow-md">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-slate-800">Google 독점 규제 심층 분석 v13</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-2">
                        <a href="#overview" class="text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-md text-sm font-medium">개요</a>
                        <a href="#timeline" class="text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-md text-sm font-medium">타임라인</a>
                        <a href="#financials" class="text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-md text-sm font-medium">재무 영향</a>
                        <a href="#valuation" class="text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-md text-sm font-medium">시나리오 평가</a>
                        <a href="#commentary" class="text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-md text-sm font-medium">월가 코멘트</a>
                        <a href="#assessment" class="text-slate-600 hover:bg-slate-100 px-3 py-2 rounded-md text-sm font-medium">종합 평가</a>
                    </div>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 sm:p-6 lg:p-8">
        
        <section id="overview" class="scroll-mt-20 mb-16">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900 sm:text-4xl">알파벳(구글) 독점 규제 리스크 분석</h2>
                <p class="mt-4 text-lg text-slate-600 max-w-4xl mx-auto">본 자료는 알파벳(구글)이 직면한 독점 규제 리스크가 회사의 재무 구조와 미래 성장성에 미치는 영향을 다각도로 분석합니다.</p>
            </div>
        </section>

        <section id="timeline" class="scroll-mt-20 mb-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900">규제 히스토리 및 전망</h2>
                <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">주요 규제 이벤트를 시간 순으로 정리했습니다. 각 항목을 클릭하여 상세 내용을 확인하십시오.</p>
            </div>
            <div id="timeline-container" class="relative border-l-4 border-blue-200 ml-6 md:ml-0">
            </div>
        </section>

        <section id="financials" class="scroll-mt-20 mb-20">
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900">수익 구조 및 규제 리스크 분석</h2>
                    <p class="mt-2 text-slate-600">2024년 1분기 기준, 각 사업 부문의 수익성과 잠재적 규제 영향을 분석합니다.</p>
                </div>

                <div class="grid grid-cols-1 xl:grid-cols-2 gap-12">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">부문별 매출 분석</h3>
                        <div class="chart-container">
                            <canvas id="revenueChart"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">부문별 영업이익 분석</h3>
                        <div class="chart-container">
                            <canvas id="profitChart"></canvas>
                        </div>
                    </div>
                </div>
                 <p class="text-xs text-slate-500 mt-6 text-center">* 리스크 영향분은 제공된 분석 보고서를 기반으로 한 추정치입니다.</p>
            </div>
            
            <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl mt-8">
                 <h3 class="text-2xl font-bold text-slate-900 mb-4">규제 리스크 영향분 추정 근거</h3>
                 <div class="space-y-6 text-sm">
                    <div class="prose prose-slate max-w-none">
                        <h4>구글 검색 (리스크 영향분: 약 30%)</h4>
                        <p>검색 부문의 가장 큰 리스크는 미국 법무부가 문제 삼는 Apple과의 기본 검색엔진 계약(TAC) 파기 가능성입니다. 이에 대한 재무적 영향은 다음과 같이 추정합니다.</p>
                        <ul>
                            <li><strong>비용 절감 (긍정적):</strong> Apple에 지불하던 연간 TAC 비용 <strong class="text-green-600">약 200억 달러</strong>가 절감됩니다.</li>
                            <li><strong>매출 손실 (부정적):</strong> 공개된 자료에 따르면 iOS 기기에서 발생하는 검색 광고 매출은 연간 약 556억 달러로 추정됩니다. 기본 검색엔진 지위 상실 시, 이 중 50%인 <strong class="text-red-600">약 278억 달러</strong>의 매출 손실이 발생한다고 가정합니다. (검색 광고 영업이익률 약 45% 적용 시, 이익 손실은 약 125억 달러)</li>
                            <li><strong>순 영향 (세전 이익 기준):</strong> 비용 절감(+200억)과 매출 손실로 인한 이익 감소(-125억)를 고려하면, 순수하게 이 계약 파기만으로 <strong class="text-green-600">약 75억 달러의 이익 개선</strong>이 나타날 수 있습니다. 하지만 이는 트래픽 감소로 인한 장기 성장성 둔화를 고려하지 않은 수치입니다. 본 분석의 리스크 영향분은 이러한 복합적인 영향을 고려하여 전체 검색 영업이익의 약 30%로 산정했습니다.</li>
                        </ul>
                    </div>
                    <div class="prose prose-slate max-w-none">
                        <h4>구글 네트워크 (리스크 영향분: 약 40%)</h4>
                        <p>네트워크 부문 리스크는 광고 기술(Ad-Tech) 사업부, 특히 Google Ad Manager의 강제 매각 또는 기능 제한 가능성에 기인합니다. </p>
                        <ul>
                            <li><strong>직접적 타격:</strong> 네트워크 매출의 대부분은 광고주와 게시자를 연결하는 Ad-Tech 플랫폼에서 발생합니다. 만약 이 사업부가 분할되면, 관련 매출 및 이익의 상당 부분이 직접적으로 소멸될 위험이 있습니다.</li>
                            <li><strong>불확실성:</strong> 분할 시 매각 가격, 조건, 이후 사업 관계 등이 매우 불투명하여 리스크 평가가 어렵습니다. 이에 따라, 사업의 근간이 흔들릴 수 있다는 점을 감안하여 높은 리스크 비율(40%)을 적용했습니다.</li>
                        </ul>
                    </div>
                    <div class="prose prose-slate max-w-none">
                        <h4>구독, 플랫폼 및 기기 (리스크 영향분: 약 20%)</h4>
                        <p>이 부문의 핵심 리스크는 구글 플레이 스토어의 결제 정책 변경 강제입니다.</p>
                        <ul>
                            <li><strong>수수료(Take-rate) 감소:</strong> Epic Games 소송 및 각국 규제 당국은 구글이 인앱결제 시 부과하는 15~30%의 수수료를 문제 삼고 있습니다. 대체 결제 시스템이 전면 허용될 경우, 구글의 평균 수수료율이 5~10%p 하락할 수 있습니다.</li>
                            <li><strong>재무적 영향:</strong> 이 부문 연간 매출(약 350억 달러)에서 수수료율이 5%p 하락한다고 가정하면, <strong class="text-red-600">연간 약 17.5억 달러</strong>의 직접적인 매출 및 이익 감소가 발생할 수 있습니다. 이를 반영하여 리스크 영향분을 20%로 추정했습니다.</li>
                        </ul>
                    </div>
                 </div>
            </div>
        </section>
        
        <section id="valuation" class="scroll-mt-20 mb-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900">10대 시나리오 기반 정량 분석 (Forward P/E & PEG)</h2>
                <p class="mt-4 text-lg text-slate-600 max-w-4xl mx-auto">규제와 AI 변수를 조합한 10가지 구체적인 시나리오별로 구글의 1~3년 후 예상 P/E와 PEG를 계산하고, 경쟁사와 비교 분석합니다. (현재 주가: $174 기준)</p>
            </div>

             <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-xl">
                <h3 class="text-xl font-bold text-slate-800 mb-4">10대 시나리오 상세 가정 및 결과</h3>
                <div id="scenario-details" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 mb-12">
                </div>
                
                <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">1년 후 예상 P/E 비율 비교</h3>
                         <div class="chart-container h-[450px]">
                            <canvas id="perChart1Y"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">2년 후 예상 P/E 비율 비교</h3>
                         <div class="chart-container h-[450px]">
                            <canvas id="perChart2Y"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">3년 후 예상 P/E 비율 비교</h3>
                         <div class="chart-container h-[450px]">
                            <canvas id="perChart3Y"></canvas>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-slate-800 mb-4 text-center">시나리오별 PEG 비율 비교</h3>
                         <div class="chart-container h-[450px]">
                            <canvas id="pegChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="commentary" class="scroll-mt-20 mb-20">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900">월가 코멘트 및 분석</h2>
                <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">규제 이슈에 대한 주요 투자은행들의 최신 분석 리포트를 정리했습니다.</p>
            </div>
            <div class="bg-white rounded-2xl shadow-xl overflow-hidden">
                <div class="overflow-x-auto">
                    <table class="w-full text-sm text-left text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-6 py-3">날짜</th>
                                <th scope="col" class="px-6 py-3">기관</th>
                                <th scope="col" class="px-6 py-3">평가</th>
                                <th scope="col" class="px-6 py-3">주요 코멘트</th>
                            </tr>
                        </thead>
                        <tbody id="commentary-table">
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <section id="assessment" class="scroll-mt-20">
             <div class="text-center mb-12">
                <h2 class="text-3xl font-bold text-slate-900">종합 평가 및 결론</h2>
                <p class="mt-4 text-lg text-slate-600 max-w-3xl mx-auto">정량적 시나리오 분석을 바탕으로 구글의 현재 가치와 미래 전망에 대한 결론을 제시합니다.</p>
            </div>
            <div class="bg-white rounded-2xl shadow-xl p-6 sm:p-8 space-y-6 prose prose-slate max-w-none">
                <h3 class="text-2xl font-bold text-slate-800 !mb-4">결론: 10개 시나리오 기반의 가치 판단</h3>
                <p>구글의 현재 주가($174)와 시장 컨센서스 PEG(약 1.13)는 본 보고서의 **'시나리오 6: 현실적 전환(PEG 1.19)'**과 **'시나리오 5: 중립적 침체(PEG 1.34)'**의 중간 지점을 반영하고 있습니다. 이는 시장이 규제 리스크(주로 Apple TAC 계약 파기)와 AI 성장 잠재력을 동시에 가격에 포함시키고 있음을 나타냅니다.</p>
                
                <div>
                    <h4 class="font-bold text-lg text-slate-700">핵심 분석</h4>
                    <ul class="list-disc list-inside text-sm">
                        <li><strong>가치 평가의 기준점:</strong> '시나리오 6'은 투자자들이 현재 가장 유력하게 보는 미래상입니다. 즉, Apple TAC 계약이 파기되더라도, AI 사업의 절반 수준 성공이 이 손실을 상당 부분 만회해 줄 것이라는 기대가 현재 주가에 반영되어 있습니다. 이 경우 3년 후 예상 P/E는 13.1배로, 경쟁사 대비 여전히 매력적인 수준을 유지합니다.</li>
                        <li><strong>리스크와 기회의 범위:</strong> '시나리오 1(최악)'의 3년 후 예상 P/E(19.1배)와 '시나리오 10(최상)'의 3년 후 예상 P/E(9.2배) 사이의 큰 격차는 구글 투자의 높은 변동성과 잠재적 보상을 동시에 보여줍니다. 규제 결과와 AI 수익화 속도에 따라 주가 가치 평가가 크게 변동할 수 있습니다.</li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold text-lg text-slate-700">투자 판단 지표</h4>
                    <p>향후 투자 판단은 다음 두 가지 핵심 지표를 추적하는 것에 달려있습니다.</p>
                    <ol class="list-decimal list-inside">
                        <li><strong>규제 판결의 실제 영향:</strong> Apple TAC 계약 파기 여부, 광고 사업부 제재 수위 등 규제 결과가 확정될 때, 실제 재무적 타격이 '시나리오 6'의 가정(이익 감소 -$3.2B)보다 큰지 작은지를 판단해야 합니다.</li>
                        <li><strong>AI 수익화의 속도:</strong> 클라우드 AI 매출과 Workspace/Google One AI 구독자 수가 실제로 '시나리오 6'의 가정(AI 이익 기여 +$4.6B)을 상회하는지, 혹은 미치지 못하는지를 분기별 실적에서 확인해야 합니다.</li>
                    </ol>
                    <p>만약 실제 결과가 시나리오 6보다 긍정적인 방향(7~10번)으로 전개되면 현재 주가는 저평가된 것으로 판단할 수 있습니다. 반대의 경우(1~5번)라면 고평가 리스크가 부각될 것입니다.</p>
                </div>
            </div>
        </section>

    </main>


    <script>
    document.addEventListener('DOMContentLoaded', () => {

        const data = {
            financials: {
                labels: ['검색', '클라우드', '유튜브 광고', '구독/기기', '네트워크'],
                revenue: [461.56, 95.74, 80.90, 87.39, 74.13],
                profit: [210.7, 9.0, 32.5, 27.7, 28.5],
                riskFactors: [0.30, 0.05, 0.15, 0.20, 0.40] 
            },
            timeline: [
                { date: '2020-10-20', title: '미 법무부(DOJ), 검색 독점 소송 제기', icon: '⚖️', details: '온라인 검색 및 검색 광고 시장의 불법적 독점을 혐의로 제소. 특히 애플 등과의 배타적 기본 검색 엔진 계약이 핵심 쟁점으로 부상.'},
                { date: '2023-01-24', title: 'DOJ, 광고 기술 독점 소송 추가 제기', icon: '⚖️', details: '광고 기술(Ad-Tech) 스택의 불법적 독점 혐의로 추가 소송. 광고 서버, 거래소 등 광고 생태계 전반의 지배력 남용을 문제 삼음.'},
                { date: '2023-12-11', title: '에픽게임즈, 플레이스토어 소송 승소', icon: '🏆', details: '배심원단이 구글 플레이스토어의 앱 유통 및 결제 정책이 반경쟁적이라고 평결. 구글의 앱 마켓 통제력에 큰 타격.'},
                { date: '2023-12-19', title: '구글, 주정부 연합과 7억 달러 합의', icon: '🤝', details: '플레이스토어 관련 반독점 소송에서 50개 주와 합의. 대체 결제 시스템 허용 등 운영 방식 변경을 약속.'},
                { date: '2024-03-07', title: 'EU 디지털시장법(DMA) 전면 시행', icon: '�🇺', details: '구글을 게이트키퍼로 지정, 자사 서비스 우대 금지, 제3자 서비스와의 상호운용성 보장 등 강력한 사전 규제 적용 시작.'},
                { date: '2024-08-05', title: 'DOJ 검색 소송 1심, 구글 패소 판결', icon: 'GAVEL', details: '법원이 구글이 일반 검색 서비스 시장에서 불법적으로 독점을 유지했다고 판결. 시정 조치 논의가 본격화됨.'},
                { date: '2025-04-18', title: 'DOJ 광고 기술 소송 1심, 구글 패소 판결', icon: 'GAVEL', details: '버지니아 법원이 구글의 광고 기술 사업이 독점적 지위를 남용했다고 판결. 광고 사업부 매각 가능성 대두.'},
                { date: '2025-08-15', title: '전망: 검색 소송 시정조치 판결 예정', icon: '🔮', details: 'DOJ는 크롬 브라우저 매각, 기본 검색 계약 금지 등 강력한 구조적 시정 조치를 요구 중. 판결 내용에 따라 구글 사업 모델의 근간이 흔들릴 수 있음.'},
            ],
            valuation: {
                scenariosData: [
                    { name: '1.최악', assumptions: 'TAC파기(-$7.8B)+AdTech분할(-$2.2B)', ai_growth: 'AI 수익화 실패 (기여도 $0)', fwd_pe_1y: 22.2, fwd_pe_2y: 20.6, fwd_pe_3y: 19.1, peg: 3.01, color: '#7f1d1d' },
                    { name: '2.비관', assumptions: 'TAC 파기 (-$7.8B)', ai_growth: 'AI 수익화 실패 (기여도 $0)', fwd_pe_1y: 20.8, fwd_pe_2y: 18.9, fwd_pe_3y: 17.4, peg: 2.31, color: '#b91c1c' },
                    { name: '3.침체', assumptions: 'TAC 파기 (-$7.8B)', ai_growth: 'Cloud AI 성공 (+$2.0B)', fwd_pe_1y: 19.8, fwd_pe_2y: 17.8, fwd_pe_3y: 16.1, peg: 1.88, color: '#dc2626' },
                    { name: '4.약한회복', assumptions: 'TAC 파기 (-$7.8B)', ai_growth: 'Workspace AI 성공 (+$7.2B)', fwd_pe_1y: 18.6, fwd_pe_2y: 16.6, fwd_pe_3y: 14.8, peg: 1.56, color: '#f97316' },
                    { name: '5.중립', assumptions: '행태규제 (-$3B)', ai_growth: 'Workspace AI 성공 (+$7.2B)', fwd_pe_1y: 17.4, fwd_pe_2y: 15.5, fwd_pe_3y: 13.8, peg: 1.34, color: '#f59e0b' },
                    { name: '6.현실', assumptions: 'TAC 파기 (-$7.8B)', ai_growth: 'AI 절반 성공 (+$4.6B)', fwd_pe_1y: 16.9, fwd_pe_2y: 14.9, fwd_pe_3y: 13.1, peg: 1.19, color: '#ca8a04' },
                    { name: '7.회복', assumptions: '행태규제 (-$3B)', ai_growth: 'AI 완전 성공 (+$9.2B)', fwd_pe_1y: 16.1, fwd_pe_2y: 14.0, fwd_pe_3y: 12.2, peg: 1.05, color: '#84cc16' },
                    { name: '8.낙관', assumptions: '규제 미미 (-$1B)', ai_growth: 'AI 완전 성공 (+$9.2B)', fwd_pe_1y: 15.0, fwd_pe_2y: 13.0, fwd_pe_3y: 11.3, peg: 0.93, color: '#4d7c0f' },
                    { name: '9.도약', assumptions: '규제 미미 (-$1B)', ai_growth: '고속 AI 성장 (+$13.8B)', fwd_pe_1y: 13.5, fwd_pe_2y: 11.6, fwd_pe_3y: 10.0, peg: 0.77, color: '#16a34a' },
                    { name: '10.최상', assumptions: '규제 없음', ai_growth: '고속 AI 성장 (+$13.8B)', fwd_pe_1y: 12.8, fwd_pe_2y: 10.9, fwd_pe_3y: 9.2, peg: 0.69, color: '#15803d' },
                ],
                peers: [
                    { name: 'MSFT', fwd_pe_1y: 31.8, fwd_pe_2y: 28.8, fwd_pe_3y: 26.1, peg: 2.39, color: '#6B7280' },
                    { name: 'AAPL', fwd_pe_1y: 25.5, fwd_pe_2y: 22.8, fwd_pe_3y: 20.0, peg: 2.26, color: '#6B7280' },
                    { name: 'META', fwd_pe_1y: 23.4, fwd_pe_2y: 21.3, fwd_pe_3y: 19.5, peg: 1.4, color: '#6B7280' },
                    { name: 'AMZN', fwd_pe_1y: 30.1, fwd_pe_2y: 27.2, fwd_pe_3y: 24.7, peg: 1.9, color: '#6B7280' },
                ]
            },
            commentary: [
                { date: '2025-04-21', firm: 'Goldman Sachs', rating: '중립(Neutral)', comment: '광고 기술 소송 패소로 불확실성 증대. 사업부 매각 시나리오가 현실화될 경우 단기적 주가 충격 불가피. 클라우드 성장이 관건.' },
                { date: '2025-04-19', firm: 'Morgan Stanley', rating: '비중확대(Overweight)', comment: '광고 부문 리스크는 주가에 상당 부분 선반영. AI를 통한 검색 경험 혁신과 클라우드 사업의 견조한 이익 성장이 장기적 상승 동력으로 작용할 것.' },
                { date: '2025-01-15', firm: 'J.P. Morgan', rating: '비중확대(Overweight)', comment: '규제 리스크에도 불구하고 펀더멘털은 견고. 2025년 AI 관련 신규 수익 창출 기대. 저평가 매력 부각.' },
                { date: '2024-08-06', firm: 'BofA Securities', rating: '매수(Buy)', comment: '검색 소송 패소는 예상된 결과. 최악의 시나리오(크롬 매각) 가능성은 낮다고 판단. 행태적 시정 조치 수준에서 마무리될 가능성에 무게.' },
            ]
        };

        const setupTimeline = () => {
            const container = document.getElementById('timeline-container');
            const iconMap = { '⚖️': '⚖️', '🏆': '🏆', '🤝': '🤝', '🇪🇺': '🇪🇺', 'GAVEL': '🏛️', '🔮': '🔮' };
            data.timeline.forEach((item) => {
                const div = document.createElement('div');
                div.className = 'timeline-item mb-12 flex items-start group cursor-pointer';
                div.innerHTML = `
                    <div class="flex-shrink-0 w-12 h-12 bg-white rounded-full flex items-center justify-center text-2xl ring-8 ring-white z-10 -ml-6 shadow-md group-hover:bg-blue-500 group-hover:text-white transition-colors duration-300 detail-toggle">${iconMap[item.icon] || '📅'}</div>
                    <div class="ml-4 w-full">
                        <p class="text-sm font-semibold text-blue-600">${new Date(item.date).toLocaleDateString('ko-KR', { year: 'numeric', month: 'long', day: 'numeric' })}</p>
                        <h4 class="font-bold text-xl text-slate-800">${item.title}</h4>
                        <div class="timeline-item-content mt-2 bg-white rounded-lg text-slate-600 text-sm shadow">
                            <p class="p-4">${item.details}</p>
                        </div>
                    </div>
                `;
                container.appendChild(div);

                div.addEventListener('click', () => {
                     div.querySelector('.timeline-item-content').classList.toggle('active');
                });
            });
        };
        
        let revenueChart, profitChart;

        const createFinancialCharts = () => {
            const baseConfig = (title) => ({
                type: 'bar',
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { stacked: true, grid: { display: false } },
                        y: { stacked: true, title: { display: true, text: '금액 (10억 $)' } }
                    },
                    plugins: {
                        legend: { display: true, position: 'top' },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    const label = context.dataset.label || '';
                                    const value = context.raw;
                                    return `${label}: ${value.toFixed(2)}B$`;
                                }
                            }
                        }
                    }
                }
            });

            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            revenueChart = new Chart(revenueCtx, { ...baseConfig('매출') });

            const profitCtx = document.getElementById('profitChart').getContext('2d');
            profitChart = new Chart(profitCtx, { ...baseConfig('영업이익') });
        };
        
        const updateFinancialCharts = () => {
            const { labels, revenue, profit, riskFactors } = data.financials;
            const safeRevenue = revenue.map((v, i) => v * (1 - riskFactors[i]));
            const riskRevenue = revenue.map((v, i) => v * riskFactors[i]);
            const safeProfit = profit.map((v, i) => v * (1 - riskFactors[i]));
            const riskProfit = profit.map((v, i) => v * riskFactors[i]);

            revenueChart.data.labels = labels;
            revenueChart.data.datasets = [
                { label: '안정적 매출 (추정)', data: safeRevenue, backgroundColor: '#60A5FA' },
                { label: '규제 리스크 영향분 (추정)', data: riskRevenue, backgroundColor: '#FCA5A5' }
            ];
            profitChart.data.labels = labels;
            profitChart.data.datasets = [
                { label: '안정적 이익 (추정)', data: safeProfit, backgroundColor: '#34D399' },
                { label: '규제 리스크 영향분 (추정)', data: riskProfit, backgroundColor: '#FCA5A5' }
            ];
            revenueChart.update();
            profitChart.update();
        };

        const renderValuationCharts = () => {
            const chartData = [...data.valuation.peers, ...data.valuation.scenariosData];
            const labels = chartData.map(d => d.name);

            const createBarChart = (canvasId, datasetLabel, dataKey, yAxisLabel) => {
                const ctx = document.getElementById(canvasId).getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: datasetLabel,
                            data: chartData.map(d => d[dataKey]),
                            backgroundColor: chartData.map(d => d.color),
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { y: { title: { display: true, text: yAxisLabel } } }
                    }
                });
            };

            createBarChart('perChart1Y', '1년 후 예상 P/E', 'fwd_pe_1y', '1년 후 예상 P/E 비율');
            createBarChart('perChart2Y', '2년 후 예상 P/E', 'fwd_pe_2y', '2년 후 예상 P/E 비율');
            createBarChart('perChart3Y', '3년 후 예상 P/E', 'fwd_pe_3y', '3년 후 예상 P/E 비율');
            createBarChart('pegChart', 'PEG 비율', 'peg', 'PEG 비율 (낮을수록 저평가)');


            const detailsContainer = document.getElementById('scenario-details');
            detailsContainer.innerHTML = '';
            data.valuation.scenariosData.forEach(scenario => {
                const card = document.createElement('div');
                card.className = 'p-3 rounded-lg text-xs';
                card.style.border = `2px solid ${scenario.color}`;
                card.innerHTML = `
                    <h4 class="font-bold text-sm" style="color: ${scenario.color};">${scenario.name}</h4>
                    <p class="font-medium text-slate-700"><strong>규제:</strong> ${scenario.assumptions}</p>
                    <p class="font-medium text-slate-700"><strong>AI:</strong> ${scenario.ai_growth}</p>
                    <div class="mt-2 pt-2 border-t border-dashed">
                        <div><span class="text-slate-500">1Y P/E: </span><strong class="text-blue-600">${scenario.fwd_pe_1y}</strong></div>
                        <div><span class="text-slate-500">2Y P/E: </span><strong class="text-blue-600">${scenario.fwd_pe_2y}</strong></div>
                        <div><span class="text-slate-500">3Y P/E: </span><strong class="text-blue-600">${scenario.fwd_pe_3y}</strong></div>
                        <div class="mt-1 pt-1 border-t border-dotted"><span class="text-slate-500">PEG: </span><strong class="text-amber-600">${scenario.peg}</strong></div>
                    </div>
                `;
                detailsContainer.appendChild(card);
            });
        };
        
        const setupCommentaryTable = () => {
            const tbody = document.getElementById('commentary-table');
            const ratingColors = { '매수(Buy)': 'text-green-600', '비중확대(Overweight)': 'text-blue-600', '중립(Neutral)': 'text-yellow-600' };

            data.commentary.forEach(item => {
                const tr = document.createElement('tr');
                tr.className = "bg-white border-b hover:bg-slate-50";
                tr.innerHTML = `
                    <td class="px-6 py-4">${item.date}</td>
                    <th scope="row" class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">${item.firm}</th>
                    <td class="px-6 py-4 font-bold ${ratingColors[item.rating] || ''}">${item.rating}</td>
                    <td class="px-6 py-4">${item.comment}</td>
                `;
                tbody.appendChild(tr);
            });
        };
        
        // --- Initialization ---
        setupTimeline();
        createFinancialCharts();
        updateFinancialCharts();
        renderValuationCharts();
        setupCommentaryTable();
    });
    </script>
</body>
</html>
�
